<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>B2B Sales Maturity Diagnostic | Salesforce</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.2/babel.min.js"></script>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Sora:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --blue:#0176D3;--blue-dk:#014486;--blue-lt:#1B96FF;--blue-xlt:#D8EDFF;
  --navy:#032D60;--teal:#06A59A;--green:#2E844A;--green-lt:#EBF7E6;
  --yellow:#FFB75D;--orange:#FE5000;--red:#BA0517;
  --g1:#F3F3F3;--g2:#E5E5E5;--g3:#C9C9C9;--g4:#706E6B;--g5:#444444;
  --white:#fff;--r:8px;--sh:0 2px 16px rgba(0,0,0,.10);--sh-md:0 4px 32px rgba(0,0,0,.13);
}
*{box-sizing:border-box;margin:0;padding:0;}
body{font-family:'Sora',sans-serif;background:#F0F4FA;color:var(--g5);min-height:100vh;}
#root{min-height:100vh;}

/* NAV */
.nav{background:var(--navy);padding:0 32px;height:60px;display:flex;align-items:center;justify-content:space-between;position:sticky;top:0;z-index:100;box-shadow:0 2px 12px rgba(0,0,0,.25);}
.nav-logo{display:flex;align-items:center;gap:12px;}
.nav-logo img{height:30px;}
.nav-div{width:1px;height:26px;background:rgba(255,255,255,.2);}
.nav-title{color:rgba(255,255,255,.85);font-size:13px;font-weight:500;letter-spacing:.2px;}
.nav-badge{background:var(--blue);color:#fff;font-size:10px;font-weight:700;padding:3px 11px;border-radius:20px;letter-spacing:1px;text-transform:uppercase;}

/* PROGRESS */
.prog-wrap{background:var(--navy);padding:0 32px 16px;border-bottom:1px solid rgba(255,255,255,.07);}
.prog-steps{display:flex;align-items:center;max-width:680px;margin:0 auto;}
.step{display:flex;flex-direction:column;align-items:center;flex:1;position:relative;}
.step:not(:last-child)::after{content:'';position:absolute;top:13px;left:50%;width:100%;height:2px;background:rgba(255,255,255,.12);z-index:0;}
.step.done::after{background:var(--teal);}
.step-dot{width:26px;height:26px;border-radius:50%;background:rgba(255,255,255,.08);border:2px solid rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:#fff;position:relative;z-index:1;transition:all .25s;}
.step.active .step-dot{background:var(--blue-lt);border-color:var(--blue-lt);box-shadow:0 0 0 4px rgba(27,150,255,.2);}
.step.done .step-dot{background:var(--teal);border-color:var(--teal);}
.step-lbl{color:rgba(255,255,255,.45);font-size:10px;margin-top:4px;font-weight:500;text-align:center;}
.step.active .step-lbl{color:#fff;}
.step.done .step-lbl{color:var(--teal);}

/* LAYOUT */
.main{max-width:760px;margin:0 auto;padding:32px 20px 80px;}
.card{background:#fff;border-radius:14px;box-shadow:var(--sh);padding:40px 44px;animation:up .3s ease;}
@keyframes up{from{opacity:0;transform:translateY(14px)}to{opacity:1;transform:translateY(0)}}

/* TYPE */
.eyebrow{font-size:10px;font-weight:700;letter-spacing:2px;text-transform:uppercase;color:var(--blue);margin-bottom:8px;}
.stitle{font-size:26px;font-weight:800;color:var(--navy);line-height:1.2;margin-bottom:10px;}
.sdesc{font-size:15px;color:var(--g4);line-height:1.7;margin-bottom:28px;}
.divider{height:1px;background:var(--g2);margin:24px 0;}

/* FORM */
.fg{margin-bottom:22px;}
.flbl{display:block;font-size:13px;font-weight:600;color:var(--g5);margin-bottom:7px;}
.req{color:var(--red);margin-left:2px;}
.finput,.fselect,.ftextarea{width:100%;padding:10px 14px;border:1.5px solid var(--g2);border-radius:var(--r);font-size:14px;font-family:inherit;color:var(--g5);background:#fff;outline:none;transition:border-color .2s,box-shadow .2s;}
.finput:focus,.fselect:focus,.ftextarea:focus{border-color:var(--blue);box-shadow:0 0 0 3px rgba(1,118,211,.1);}
.ftextarea{min-height:80px;resize:vertical;}
.fselect{appearance:none;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23706E6B' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");background-repeat:no-repeat;background-position:right 12px center;padding-right:36px;}
.errmsg{font-size:12px;color:var(--red);margin-top:5px;}
.req-note{font-size:12px;color:var(--g4);margin-bottom:20px;}

/* CHIPS */
.chips{display:flex;flex-wrap:wrap;gap:8px;}
.chip{padding:7px 14px;border-radius:20px;border:1.5px solid var(--g2);font-size:13px;font-weight:500;color:var(--g4);cursor:pointer;transition:all .15s;background:#fff;user-select:none;}
.chip:hover{border-color:var(--blue);color:var(--blue);}
.chip.on{background:var(--blue);border-color:var(--blue);color:#fff;}

/* SCALE */
.scale-row{display:flex;gap:5px;}
.scale-btn{flex:1;padding:10px 2px;border:1.5px solid var(--g2);border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;background:#fff;color:var(--g4);text-align:center;transition:all .15s;}
.scale-btn:hover{border-color:var(--blue);color:var(--blue);}
.scale-btn.on{background:var(--blue);border-color:var(--blue);color:#fff;}
.scale-lbls{display:flex;justify-content:space-between;margin-top:5px;}
.scale-lbls span{font-size:11px;color:var(--g4);}

/* QUESTION */
.q-pips{display:flex;gap:4px;margin-bottom:22px;}
.q-pip{height:4px;border-radius:2px;flex:1;background:var(--g2);transition:background .2s;}
.q-pip.done{background:var(--blue);}
.q-pip.cur{background:var(--blue-lt);}
.q-badge{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;padding:3px 10px;border-radius:20px;background:var(--blue-xlt);color:var(--blue-dk);}
.q-meta{display:flex;align-items:center;gap:10px;margin-bottom:8px;}
.q-num{font-size:12px;color:var(--g4);font-weight:500;}
.q-text{font-size:18px;font-weight:700;color:var(--navy);line-height:1.4;margin-bottom:20px;}
.ans-grid{display:flex;flex-direction:column;gap:10px;}
.ans-card{display:flex;align-items:flex-start;gap:14px;padding:14px 16px;border:1.5px solid var(--g2);border-radius:10px;cursor:pointer;transition:all .15s;background:#fff;text-align:left;}
.ans-card:hover{border-color:var(--blue);box-shadow:0 2px 8px rgba(1,118,211,.09);}
.ans-card.on{border-color:var(--blue);background:var(--blue-xlt);}
.ans-num{min-width:28px;height:28px;border-radius:50%;background:var(--g1);border:1.5px solid var(--g2);display:flex;align-items:center;justify-content:center;font-size:12px;font-weight:700;color:var(--g4);flex-shrink:0;margin-top:1px;}
.ans-card.on .ans-num{background:var(--blue);border-color:var(--blue);color:#fff;}
.ans-text{font-size:14px;color:var(--g5);line-height:1.5;}
.ans-card.on .ans-text{color:var(--navy);font-weight:500;}

/* BUTTONS */
.btn{padding:11px 28px;border-radius:7px;font-size:14px;font-weight:600;cursor:pointer;border:none;transition:all .15s;font-family:inherit;display:inline-flex;align-items:center;gap:8px;}
.btn-primary{background:var(--blue);color:#fff;}
.btn-primary:hover{background:var(--blue-dk);}
.btn-primary:disabled{opacity:.4;cursor:not-allowed;}
.btn-secondary{background:#fff;color:var(--blue);border:1.5px solid var(--blue);}
.btn-secondary:hover{background:var(--blue-xlt);}
.btn-ghost{background:transparent;color:var(--g4);}
.btn-ghost:hover{color:var(--g5);}
.btn-green{background:var(--green);color:#fff;}
.btn-green:hover{background:#1d6336;}
.btn-green:disabled{opacity:.4;cursor:not-allowed;}
.btn-nav{display:flex;justify-content:space-between;align-items:center;margin-top:30px;padding-top:22px;border-top:1px solid var(--g2);}

/* HERO */
.hero{background:linear-gradient(135deg,var(--navy) 0%,#093a6e 55%,#0c56a0 100%);border-radius:14px;padding:52px 44px 44px;color:#fff;margin-bottom:22px;position:relative;overflow:hidden;animation:up .35s ease;}
.hero::before{content:'';position:absolute;top:-60px;right:-60px;width:320px;height:320px;background:radial-gradient(circle,rgba(27,150,255,.18) 0%,transparent 70%);border-radius:50%;}
.hero::after{content:'';position:absolute;bottom:-40px;left:-40px;width:200px;height:200px;background:radial-gradient(circle,rgba(6,165,154,.1) 0%,transparent 70%);border-radius:50%;}
.hero-eye{font-size:10px;font-weight:700;letter-spacing:2.5px;text-transform:uppercase;opacity:.55;margin-bottom:12px;}
.hero-title{font-size:36px;font-weight:800;line-height:1.12;margin-bottom:14px;}
.hero-desc{font-size:15px;opacity:.8;line-height:1.7;max-width:500px;margin-bottom:32px;}
.hero-goals{display:flex;flex-direction:column;gap:10px;margin-bottom:36px;}
.hero-goal{display:flex;align-items:center;gap:10px;font-size:14px;opacity:.88;}
.hero-dot{width:6px;height:6px;border-radius:50%;background:var(--blue-lt);flex-shrink:0;}
.hero-meta{display:flex;flex-wrap:wrap;gap:18px;font-size:12px;opacity:.5;border-top:1px solid rgba(255,255,255,.12);padding-top:18px;}
.info-boxes{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:18px;}
.info-box{background:#fff;border-radius:10px;padding:16px;text-align:center;box-shadow:var(--sh);}
.info-icon{font-size:24px;margin-bottom:6px;}
.info-lbl{font-size:12px;font-weight:700;color:var(--navy);margin-bottom:2px;}
.info-sub{font-size:11px;color:var(--g4);}

/* RESULTS */
.res-header{background:linear-gradient(135deg,var(--navy),#0c3d6e);border-radius:14px 14px 0 0;padding:36px 44px 30px;color:#fff;}
.res-top{display:flex;justify-content:space-between;align-items:flex-start;flex-wrap:wrap;gap:16px;}
.tier-badge{display:inline-flex;align-items:center;gap:6px;font-size:10px;font-weight:700;letter-spacing:1.5px;text-transform:uppercase;padding:5px 14px;border-radius:20px;margin-bottom:10px;}
.t1{background:rgba(186,5,23,.22);color:#FFB3BA;}
.t2{background:rgba(254,80,0,.22);color:#FFBE9D;}
.t3{background:rgba(255,183,93,.22);color:#FFE0A3;}
.t4{background:rgba(6,165,154,.22);color:#A3F0EB;}
.res-tier-title{font-size:22px;font-weight:800;}
.res-tier-desc{font-size:14px;opacity:.72;margin-top:6px;max-width:400px;line-height:1.55;}
.score-block{text-align:right;}
.score-lbl{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;opacity:.5;margin-bottom:4px;}
.score-num{font-size:56px;font-weight:800;line-height:1;color:#fff;}
.score-sub{font-size:12px;opacity:.45;margin-top:3px;}

.res-body{background:#fff;border-radius:0 0 14px 14px;padding:36px 44px;box-shadow:var(--sh);}
.sec-head{font-size:14px;font-weight:700;color:var(--navy);margin-bottom:14px;display:flex;align-items:center;gap:8px;}
.sec-head::after{content:'';flex:1;height:1px;background:var(--g2);margin-left:8px;}

/* SPECTRUM VISUAL */
.spectrum-wrap{margin-bottom:32px;}
.spectrum-track{display:flex;gap:3px;margin-bottom:14px;}
.spec-seg{flex:1;border-radius:6px;height:10px;transition:all .3s;}
.spec-seg.s1{background:#BA0517;}
.spec-seg.s2{background:#FE5000;}
.spec-seg.s3{background:#FFB75D;}
.spec-seg.s4{background:#06A59A;}
.spec-seg.active{height:16px;margin-top:-3px;box-shadow:0 0 0 3px rgba(1,118,211,.3);}
.spectrum-tiers{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;}
.spec-tier{padding:14px 16px;border-radius:10px;border:1.5px solid var(--g2);transition:all .3s;position:relative;}
.spec-tier.current{border-width:2px;}
.spec-tier.current.t1-border{border-color:#BA0517;background:rgba(186,5,23,.03);}
.spec-tier.current.t2-border{border-color:#FE5000;background:rgba(254,80,0,.03);}
.spec-tier.current.t3-border{border-color:#FFB75D;background:rgba(255,183,93,.04);}
.spec-tier.current.t4-border{border-color:#06A59A;background:rgba(6,165,154,.04);}
.spec-tier-label{font-size:10px;font-weight:700;letter-spacing:1px;text-transform:uppercase;margin-bottom:5px;}
.spec-tier-name{font-size:13px;font-weight:700;color:var(--navy);margin-bottom:5px;}
.spec-tier-desc{font-size:11px;color:var(--g4);line-height:1.55;}
.you-pill{display:inline-block;font-size:9px;font-weight:700;letter-spacing:.8px;text-transform:uppercase;padding:2px 8px;border-radius:20px;background:var(--navy);color:#fff;margin-bottom:6px;}

/* HEATMAP */
.heatmap{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:28px;}
.hm-item{padding:14px 16px;border-radius:10px;border:1.5px solid var(--g2);}
.hm-dim{font-size:12px;font-weight:600;color:var(--g4);margin-bottom:5px;}
.hm-row{display:flex;align-items:center;gap:10px;}
.hm-bg{flex:1;height:7px;border-radius:4px;background:var(--g2);overflow:hidden;}
.hm-fill{height:100%;border-radius:4px;transition:width 1s cubic-bezier(.4,0,.2,1);}
.hm-val{font-size:14px;font-weight:700;min-width:28px;text-align:right;}
.hm-next{font-size:11px;color:var(--g4);margin-top:5px;line-height:1.5;font-style:italic;}
.c1{background:var(--red)}.c2{background:var(--orange)}.c3{background:var(--yellow)}.c4{background:var(--teal)}
.v1{color:var(--red)}.v2{color:var(--orange)}.v3{color:#B8860B}.v4{color:var(--teal)}

/* RADAR */
.radar-wrap{display:flex;justify-content:center;margin-bottom:28px;}

/* SUMMARY */
.summary-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(170px,1fr));gap:10px;background:var(--g1);border-radius:10px;padding:16px 18px;}
.sum-item .sum-lbl{font-size:11px;color:var(--g4);font-weight:600;}
.sum-item .sum-val{font-size:13px;color:var(--g5);font-weight:600;margin-top:2px;}

/* STATUS */
.status-msg{padding:12px 16px;border-radius:8px;font-size:13px;font-weight:600;margin-bottom:14px;text-align:center;}
.st-sending{background:#EEF4FF;color:var(--blue);}
.st-ok{background:var(--green-lt);color:var(--green);}
.st-err{background:#FDECEA;color:var(--red);}
.print-bar{display:flex;gap:10px;justify-content:flex-end;margin-top:22px;}

/* THANK YOU */
.ty{text-align:center;padding:60px 40px;animation:up .4s ease;}
.ty-icon{font-size:64px;margin-bottom:20px;}
.ty-title{font-size:30px;font-weight:800;color:var(--navy);margin-bottom:12px;}
.ty-desc{font-size:16px;color:var(--g4);line-height:1.7;max-width:460px;margin:0 auto 28px;}
.ty-score{background:linear-gradient(135deg,var(--navy),#0176D3);border-radius:12px;padding:24px 32px;display:inline-flex;gap:32px;margin-bottom:24px;color:#fff;}
.ty-score-item{text-align:center;}
.ty-score-val{font-size:32px;font-weight:800;line-height:1;}
.ty-score-lbl{font-size:11px;opacity:.6;margin-top:4px;letter-spacing:.5px;}
.ty-actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;}

@media print{.nav,.prog-wrap,.print-bar,.btn-nav{display:none!important;}.main{padding:0;max-width:100%;}.card,.res-body,.res-header{box-shadow:none;border-radius:0;}}
@media(max-width:600px){.card,.res-body,.res-header{padding:22px 16px;}.hero{padding:30px 18px;}.hero-title{font-size:26px;}.heatmap,.spectrum-tiers{grid-template-columns:1fr;}.info-boxes{grid-template-columns:1fr 1fr;}.ty-score{flex-direction:column;gap:16px;}}
</style>
</head>
<body>
<div id="root"></div>
<script type="text/babel">
const { useState, useEffect } = React;

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   ‚öôÔ∏è  CONFIG ‚Äî edit these before going live
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const GOOGLE_SHEETS_WEBHOOK = "YOUR_APPS_SCRIPT_URL_HERE";
const QUESTIONS_SHEET_URL   = "YOUR_APPS_SCRIPT_URL_HERE"; // same URL, reads questions via ?action=getQuestions
const TESTER_DOMAINS        = ["salesforce.com"];           // add more: ["salesforce.com","partner.com"]
const CALENDAR_URL          = "";                           // leave blank ‚Äî no CTA per spec

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DEFAULT QUESTION BANK (used if sheet URL not configured)
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const DEFAULT_QUESTIONS = [
  {id:"q1",domain:"Sales Process",dimension:"Sales Process & Governance",active:true,
   text:"Is your ICP (ideal customer profile) documented and used to qualify deals?",
   answers:["Not defined ‚Äî reps qualify based on gut feel","Defined informally; not consistently enforced","Documented and used by most teams to qualify opportunities","Operationalized in CRM, reviewed quarterly, and tied to routing rules"]},
  {id:"q2",domain:"Sales Process",dimension:"Sales Process & Governance",active:true,
   text:"Are sales stages defined with exit criteria and consistently followed?",
   answers:["No common stages; each rep operates independently","Stages exist in CRM but inconsistently applied","Stages with exit criteria are used and enforced in pipeline reviews","Enforced, coached, and continuously improved using conversion data"]},
  {id:"q3",domain:"CRM & Data",dimension:"Data, CRM & AI",active:true,
   text:"How well does your CRM opportunity structure reflect how your business actually sells?",
   answers:["Poor fit ‚Äî CRM is a transactional log, not a sales tool","Partial fit ‚Äî adapted but constrained by system limitations","Strong fit ‚Äî CRM is aligned to actual sales motion and used daily","Strategic fit ‚Äî CRM architecture optimized for revenue operations and trusted as system of record"]},
  {id:"q4",domain:"Sales Process",dimension:"Sales Process & Governance",active:true,
   text:"How would you rate your lead management and qualification process?",
   answers:["Inconsistent lead routing; no defined qualification framework","Basic routing and manual qualification in place","Defined methodology (BANT, MEDDPICC, SPICED) with reporting","AI-assisted scoring, fast-response SLAs, and data-driven qualification"]},
  {id:"q5",domain:"Forecasting",dimension:"Forecasting & Pipeline",active:true,
   text:"How objective and accurate is your sales forecasting?",
   answers:["Gut feel, low confidence ‚Äî no real process","Manager judgment and spreadsheets; inconsistent accuracy","Criteria-based forecasting with a regular cadence and tracked accuracy","Data-driven with AI-assisted accuracy tracking and scenario modeling"]},
  {id:"q6",domain:"Pipeline Mgmt",dimension:"Forecasting & Pipeline",active:true,
   text:"How do you manage pipeline health ‚Äî coverage, aging, and next steps?",
   answers:["No standard ‚Äî pipeline visibility is low and unreliable","Basic reviews only; no standardized KPIs","Pipeline KPIs tracked with weekly reviews and dashboards","Predictive scoring, AI-guided early warning triggers, and automated alerts"]},
  {id:"q7",domain:"Pricing / CPQ",dimension:"Pricing & Quote-to-Cash",active:true,
   text:"How controlled is your discounting and pricing approval process?",
   answers:["Ad hoc ‚Äî reps discount freely with no governance","Guidelines exist but exceptions are common and untracked","Policy and approval workflows enforced in the deal process","CPQ-enforced pricing with margin leakage analytics and deal-level visibility"]},
  {id:"q8",domain:"Quote-to-Cash",dimension:"Pricing & Quote-to-Cash",active:true,
   text:"How integrated is your quote ‚Üí order ‚Üí invoice ‚Üí payment process?",
   answers:["Fully manual handoffs; no integration between systems","Partial integration; major steps still require manual effort","Integrated for most products with clear process ownership","End-to-end integrated with cycle time measurement and exception management"]},
  {id:"q9",domain:"AI & Automation",dimension:"Data, CRM & AI",active:true,
   text:"How would you rate your use of AI, automation, or intelligent agents in your sales process?",
   answers:["No AI usage ‚Äî fully manual processes","Early experimentation with scoring or summaries","AI used in coaching, scoring, or call summaries at scale","Agentic workflows that plan, reason, and take action across the revenue lifecycle"]},
  {id:"q10",domain:"Sales Operations",dimension:"Operations & Lifecycle",active:true,
   text:"How would you rate your sales operations and post-sales account management integration?",
   answers:["Fragmented ‚Äî sales and post-sales operate in silos with no shared visibility","Basic alignment ‚Äî handoffs defined but manual and inconsistently executed","Coordinated ‚Äî clear ownership, structured handoffs, and shared CRM visibility","Integrated and proactive ‚Äî shared KPIs, real-time insights, proactive account growth"]},
  {id:"q11",domain:"Enablement",dimension:"Enablement & Coaching",active:true,
   text:"Are playbooks and messaging standardized by segment or use case?",
   answers:["No playbooks ‚Äî reps create their own approaches","Some documents exist but not consistently used","Used in onboarding and coaching; embedded in workflow","Measured for effectiveness, continuously updated, tied to win/loss data"]},
  {id:"q12",domain:"Coaching",dimension:"Enablement & Coaching",active:true,
   text:"Do managers run a consistent, structured coaching cadence?",
   answers:["Sporadic ‚Äî coaching happens ad hoc, if at all","1:1s happen but are unstructured and deal-focused only","Structured coaching and deal reviews tied to skills development","Coaching tied to skills metrics, performance data, and business outcomes"]},
  {id:"q13",domain:"CRM Adoption",dimension:"Data, CRM & AI",active:true,
   text:"How would you rate CRM adoption and data hygiene across your sales org?",
   answers:["Low trust in CRM data; heavy Excel shadow systems are the norm","Moderate usage; required fields often incomplete or outdated","Strong adoption ‚Äî consistent updates and next steps logged","CRM is the single source of truth with automated capture and behavioral alignment"]},
  {id:"q14",domain:"Data Governance",dimension:"Data, CRM & AI",active:true,
   text:"Do you have shared definitions for key metrics ‚Äî MQL/SQL, stages, ARR, churn?",
   answers:["No shared definitions ‚Äî every team measures differently","Partial alignment; frequent disputes over numbers","Definitions documented and used consistently across revenue teams","Governed with clear owners, change control, and a published metric catalog"]},
  {id:"q15",domain:"Growth Strategy",dimension:"Growth Strategy",active:true,
   text:"Where is incremental profit most likely to come from in your business today?",
   answers:["Primarily from new lead volume alone","Mostly new leads with very limited expansion motion","Balanced acquisition and account expansion","Primarily from systematically expanding and renewing existing accounts"]},
  {id:"q16",domain:"Revenue Constraint",dimension:"Growth Strategy",active:true,
   text:"What is the biggest barrier to generating more revenue today?",
   answers:["Insufficient high-quality new leads","Time lost chasing poor-fit or low-intent leads","Administrative and internal process burden on sellers","Post-sale servicing and order management friction impacting retention and expansion"]},
  {id:"q17",domain:"Agility",dimension:"Operations & Lifecycle",active:true,
   text:"How agile is your organization in updating pricing rules, approval workflows, or sales stages?",
   answers:["IT-dependent ‚Äî all changes are slow and require tickets","Minor changes can be made by sales ops with effort","Sales and ops can adjust key levers without engineering","Business users fully manage rules and strategies via a no-code UI"]},
  {id:"q18",domain:"Partner / Data",dimension:"Operations & Lifecycle",active:true,
   text:"How do external partners or 3rd-party data enhance your sales team's effectiveness?",
   answers:["No external data or partnerships leveraged","Some 3rd-party data available; ad hoc partner collaboration","3rd-party data directly impacts lead and deal scoping; defined partner network","Integrated and automated 3rd-party data with a governed partner ecosystem"]},
];

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MATURITY MODEL DATA (drawn from briefing doc)
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const TIER_INFO = [null,
  {label:"Ad Hoc / Reactive", short:"Ad Hoc",
   desc:"Revenue execution depends on individual heroics. Pipeline, forecasting, and handoffs are inconsistent. CRM reflects activity but is not yet a trusted system of record.",
   color:"#BA0517", cls:"t1", border:"t1-border"},
  {label:"Repeatable / Developing", short:"Repeatable",
   desc:"Core processes exist but adoption varies across teams. Salesforce is used but shadow systems remain. Reporting is available but confidence in the numbers is mixed.",
   color:"#FE5000", cls:"t2", border:"t2-border"},
  {label:"Defined / Measured", short:"Defined",
   desc:"Standardized motions, governed stages, and shared metrics are in place. Salesforce is the system of record. Leaders can make decisions from dashboards with confidence.",
   color:"#B8860B", cls:"t3", border:"t3-border"},
  {label:"Optimized / Agentic", short:"Optimized",
   desc:"Cross-functional RevOps execution with automation, integration, and continuous improvement driven by trusted data. The organization is positioned to deploy intelligent agents that reason, act, and operate across the revenue lifecycle.",
   color:"#06A59A", cls:"t4", border:"t4-border"},
];

// One sentence per dimension: current state + what next level looks like
const DIM_NARRATIVES = {
  "Growth Strategy":{
    1:"At this level, growth is primarily driven by new lead volume with little intentional expansion motion. Organizations at the next level begin segmenting accounts and building a defined expansion pipeline alongside new business.",
    2:"At this level, expansion activity exists but remains inconsistent and unmeasured. Organizations at the next level have balanced acquisition and retention motions with shared KPIs and account segmentation in Salesforce.",
    3:"At this level, growth strategy is balanced between new logos and account expansion. Organizations at the next level systematically manage expansion and renewal as a primary profit driver, supported by automated account health signals.",
    4:"At this level, expansion and renewal are the primary growth engine, measured and repeatable. Organizations here are typically exploring AI-assisted account scoring and proactive intervention triggers.",
  },
  "Sales Process & Governance":{
    1:"At this level, qualification and stage management vary by rep with no consistent standard. Organizations at the next level have defined stages with documented exit criteria and basic enforcement in Salesforce.",
    2:"At this level, processes exist but adoption is uneven across the team. Organizations at the next level use Salesforce Path to enforce stage discipline, required key fields, and in-flow guidance that reduces rep guesswork.",
    3:"At this level, sales stages are defined, enforced, and used to drive forecast quality. Organizations at the next level continuously improve stage conversion using data, with coaching tied directly to process metrics.",
    4:"At this level, sales process governance is a competitive advantage ‚Äî coached, measured, and continuously improved. Organizations here are typically extending governance into AI-assisted qualification and next-best-action guidance.",
  },
  "Forecasting & Pipeline":{
    1:"At this level, forecasting relies on manager judgment and spreadsheets with low confidence. Organizations at the next level adopt Salesforce forecast categories and a regular commit cadence.",
    2:"At this level, a forecasting process exists but accuracy is inconsistent. Organizations at the next level have pipeline KPI dashboards, stage aging alerts, and a weekly governance cadence.",
    3:"At this level, forecasting is criteria-based, cadenced, and tracked against actuals. Organizations at the next level layer in AI-assisted accuracy modeling and scenario planning within Salesforce.",
    4:"At this level, forecasting is data-driven, accurate, and continuously improving. Organizations here are typically using predictive intelligence to identify risk and opportunity before pipeline reviews.",
  },
  "Pricing & Quote-to-Cash":{
    1:"At this level, discounting is ad hoc and the quote-to-cash process is largely manual. Organizations at the next level establish pricing guidelines and begin enforcing approval workflows in Salesforce.",
    2:"At this level, pricing guidelines exist but exceptions are common. Organizations at the next level deploy Salesforce CPQ to standardize quoting and enforce approval rules with margin visibility.",
    3:"At this level, CPQ is in use with governed approvals and quote cycle time is tracked. Organizations at the next level integrate order and invoice status into Salesforce, eliminating seller distraction and post-sale friction.",
    4:"At this level, the quote-to-cash process is end-to-end integrated and measurable. Organizations here are typically extending into automated renewal management and AI-assisted deal structuring.",
  },
  "Enablement & Coaching":{
    1:"At this level, enablement is informal and coaching is sporadic. Organizations at the next level build segment-specific playbooks and establish a structured coaching cadence.",
    2:"At this level, enablement content exists but is inconsistently applied. Organizations at the next level embed playbooks in Salesforce workflow and tie coaching to observable skill gaps.",
    3:"At this level, enablement and coaching are structured, consistent, and tied to skills development. Organizations at the next level measure enablement effectiveness against win rates and continuously update playbooks.",
    4:"At this level, enablement is a measured, data-driven function driving business outcomes. Organizations here are typically deploying AI-assisted coaching tools and real-time guidance agents.",
  },
  "Data, CRM & AI":{
    1:"At this level, CRM data is inconsistent and shadow systems are common. Organizations at the next level simplify CRM fields, enforce data minimums, and begin building trust in the pipeline view.",
    2:"At this level, Salesforce is used but data quality and adoption are uneven. Organizations at the next level establish shared metric definitions, duplicate prevention rules, and in-app guidance to reduce friction.",
    3:"At this level, Salesforce is the system of record with strong adoption and trusted reporting. Organizations at the next level pilot AI-assisted data capture, lead scoring, and opportunity health monitoring.",
    4:"At this level, CRM data is clean, trusted, and the foundation for intelligent automation. Organizations here are positioned to deploy Agentforce agents grounded in reliable CRM data with deterministic workflows as actions.",
  },
  "Operations & Lifecycle":{
    1:"At this level, sales and post-sales operate in silos with manual, inconsistent handoffs. Organizations at the next level define handoff ownership and create standard artifacts for onboarding and service transitions.",
    2:"At this level, handoff processes exist but lack consistency and measurement. Organizations at the next level implement standardized handoff packages and expose service and order status within Salesforce.",
    3:"At this level, lifecycle handoffs are structured, measured, and improving. Organizations at the next level automate handoff creation, close feedback loops, and reduce seller time diverted to service inquiries.",
    4:"At this level, the revenue lifecycle is integrated and proactively managed. Organizations here are typically deploying automation agents that monitor account health and trigger intervention workflows without human initiation.",
  },
};

const DIMENSIONS = {
  "Growth Strategy":["q15","q16"],
  "Sales Process & Governance":["q1","q2","q3","q4"],
  "Forecasting & Pipeline":["q5","q6"],
  "Pricing & Quote-to-Cash":["q7","q8"],
  "Enablement & Coaching":["q11","q12"],
  "Data, CRM & AI":["q9","q13","q14"],
  "Operations & Lifecycle":["q10","q17","q18"],
};

const INDUSTRIES=["Agriculture & Agribusiness","Automotive & Mobility","Aerospace & Defense","Chemicals & Materials","Construction & Engineering","Consumer Goods (CPG)","Retail","Food & Beverage","Hospitality, Travel & Leisure","Transportation & Logistics","Energy, Utilities & Resources","Manufacturing & Industrial","Life Sciences & Pharma","Healthcare Providers & Services","Financial Services (Banking)","Insurance","Capital Markets & Asset Management","Technology: Software / SaaS","Technology: Hardware & Devices","Telecommunications","Media, Sports & Entertainment","Education & EdTech","Government & Public Sector","Nonprofit & NGOs","Professional & Business Services","Legal Services","Real Estate & Property Management","Staffing, HR & Workforce Solutions","Technology Services / MSP"];
const OBJECTIVES=["Acquiring New Logos","Pipeline Coverage","Lead-to-Opportunity Conversion","Deal Velocity","Average Deal Size","Forecast Accuracy","Win Rate","Sales Productivity","Cross-Sell / Upsell Growth","Account Penetration","Sales & Marketing Alignment","Sales & Operations Collaboration","Data Quality & CRM Adoption","Leveraging AI & Automation"];
const SEGMENTS=["SMB / Transactional","Mid-Market","Enterprise / Strategic Accounts","Project-Based / Complex Sales","Channel / Partner-Led","Retention / Renewals","Expansion / Cross-Sell"];

/* ‚ïê‚ïê‚ïê HELPERS ‚ïê‚ïê‚ïê */
const getTier = a => a<1.75?1:a<2.5?2:a<3.25?3:4;
const scoreStyle = s => s<1.75?{bar:"c1",val:"v1"}:s<2.5?{bar:"c2",val:"v2"}:s<3.25?{bar:"c3",val:"v3"}:{bar:"c4",val:"v4"};
const getDimScores = ans => Object.fromEntries(
  Object.entries(DIMENSIONS).map(([d,ids])=>{
    const v=ids.map(id=>ans[id]).filter(x=>x!==undefined);
    return [d, v.length ? parseFloat((v.reduce((a,b)=>a+b,0)/v.length).toFixed(2)) : undefined];
  }).filter(([,v])=>v!==undefined)
);
const extractDomain = email => {
  const m = (email||"").match(/@([^@]+)$/);
  return m ? m[1].toLowerCase() : "";
};

/* ‚ïê‚ïê‚ïê SF LOGO SVG ‚ïê‚ïê‚ïê */
const SFLogo = () => (
  <svg height="28" viewBox="0 0 280 60" fill="white" xmlns="http://www.w3.org/2000/svg">
    <path d="M42 38.5c-1.5.8-3.2 1.3-5 1.3-5.5 0-10-4.5-10-10s4.5-10 10-10c2.3 0 4.5.8 6.2 2.1 1.8-3.5 5.5-5.9 9.8-5.9 2 0 3.8.5 5.4 1.4C60.5 13.5 65.7 10 71.8 10c8.3 0 15 6.7 15 15 0 .7 0 1.4-.1 2 1-.3 2.1-.5 3.2-.5 6.1 0 11 4.9 11 11s-4.9 11-11 11H36c-5 0-9-4-9-9 0-4.2 2.8-7.7 6.8-8.7L42 38.5z"/>
    <text x="100" y="42" fontFamily="'Sora','Helvetica Neue',Arial,sans-serif" fontSize="28" fontWeight="700" fill="white" letterSpacing="0.5">salesforce</text>
  </svg>
);

/* ‚ïê‚ïê‚ïê NAV ‚ïê‚ïê‚ïê */
function Nav(){
  return(
    <nav className="nav">
      <div className="nav-logo"><SFLogo/><div className="nav-div"/><span className="nav-title">B2B Sales Maturity Diagnostic</span></div>
      <div className="nav-badge">Consulting</div>
    </nav>
  );
}

function ProgressBar({step}){
  const steps=["Welcome","About You","Strategy","Assessment","Results"];
  return(
    <div className="prog-wrap">
      <div className="prog-steps">
        {steps.map((s,i)=>{const n=i+1,cls=n<step?"done":n===step?"active":"";return(
          <div key={s} className={`step ${cls}`}>
            <div className="step-dot">{n<step?"‚úì":n}</div>
            <div className="step-lbl">{s}</div>
          </div>
        );})}
      </div>
    </div>
  );
}

/* ‚ïê‚ïê‚ïê SCREENS ‚ïê‚ïê‚ïê */
function WelcomeScreen({onNext}){
  return(
    <div>
      <div className="hero">
        <div className="hero-eye">Salesforce Consulting ‚Äî Confidential</div>
        <h1 className="hero-title">B2B Sales Maturity<br/>Diagnostic</h1>
        <p className="hero-desc">A research-backed assessment of your revenue engine across 7 RevOps dimensions. Understand where you stand today and what the path forward looks like.</p>
        <div className="hero-goals">
          <div className="hero-goal"><div className="hero-dot"/><span>Evaluate your sales engine against proven RevOps best practices</span></div>
          <div className="hero-goal"><div className="hero-dot"/><span>Receive a scored readout across 7 capability dimensions</span></div>
          <div className="hero-goal"><div className="hero-dot"/><span>Understand what organizations at the next maturity level typically have in place</span></div>
        </div>
        <div className="hero-meta"><span>üìã 4 sections</span><span>‚è± ~8 minutes</span><span>üìä 18 questions</span><span>üéØ 7 dimensions</span></div>
      </div>
      <div className="info-boxes">
        <div className="info-box"><div className="info-icon">üèÜ</div><div className="info-lbl">Maturity Score</div><div className="info-sub">1‚Äì4 scale, 7 dimensions</div></div>
        <div className="info-box"><div className="info-icon">üó∫Ô∏è</div><div className="info-lbl">Dimension Heatmap</div><div className="info-sub">See where you lead & lag</div></div>
        <div className="info-box"><div className="info-icon">üìà</div><div className="info-lbl">Growth Narrative</div><div className="info-sub">What the next level looks like</div></div>
      </div>
      <div style={{textAlign:"center",marginTop:28}}>
        <button className="btn btn-primary" style={{fontSize:16,padding:"14px 44px"}} onClick={onNext}>Begin Assessment ‚Üí</button>
      </div>
    </div>
  );
}

function AboutYouScreen({data,onChange,onNext,onBack}){
  const [err,setErr]=useState({});
  const validate=()=>{
    const e={};
    if(!data.fullName?.trim())e.fullName="Required";
    if(!data.email?.trim()||!/\S+@\S+\.\S+/.test(data.email))e.email="Valid email required";
    if(!data.businessName?.trim())e.businessName="Required";
    if(!data.title?.trim())e.title="Required";
    if(!data.industry)e.industry="Please select your industry";
    setErr(e);return!Object.keys(e).length;
  };
  const F=({label,req,err:e,children})=>(
    <div className="fg"><label className="flbl">{label}{req&&<span className="req"> *</span>}</label>{children}{e&&<div className="errmsg">{e}</div>}</div>
  );
  return(
    <div className="card">
      <div className="eyebrow">Section 1 of 3</div>
      <h2 className="stitle">About You</h2>
      <p className="sdesc">Tell us about yourself so we can personalize your results.</p>
      <p className="req-note">Fields marked * are required</p>
      <F label="Full Name" req err={err.fullName}><input className="finput" placeholder="Jane Smith" value={data.fullName||""} onChange={e=>onChange("fullName",e.target.value)}/></F>
      <F label="Business Email" req err={err.email}><input className="finput" type="email" placeholder="jane@company.com" value={data.email||""} onChange={e=>onChange("email",e.target.value)}/></F>
      <F label="Business Name" req err={err.businessName}><input className="finput" placeholder="Acme Corp" value={data.businessName||""} onChange={e=>onChange("businessName",e.target.value)}/></F>
      <F label="Your Title" req err={err.title}><input className="finput" placeholder="SVP of Sales" value={data.title||""} onChange={e=>onChange("title",e.target.value)}/></F>
      <F label="Industry" req err={err.industry}>
        <select className="fselect" value={data.industry||""} onChange={e=>onChange("industry",e.target.value)}>
          <option value="">Select your industry‚Ä¶</option>
          {INDUSTRIES.map(i=><option key={i}>{i}</option>)}
        </select>
      </F>
      <div className="btn-nav">
        <button className="btn btn-ghost" onClick={onBack}>‚Üê Back</button>
        <button className="btn btn-primary" onClick={()=>{if(validate())onNext();}}>Continue ‚Üí</button>
      </div>
    </div>
  );
}

function StrategyScreen({data,onChange,onNext,onBack}){
  const [err,setErr]=useState({});
  const validate=()=>{
    const e={};
    if(!data.objectives?.length)e.objectives="Select at least one";
    if(!data.topOutcome?.trim())e.topOutcome="Required";
    if(!data.timeline)e.timeline="Required";
    if(!data.segments?.length)e.segments="Select at least one";
    setErr(e);return!Object.keys(e).length;
  };
  const toggle=(field,val)=>{const a=data[field]||[];onChange(field,a.includes(val)?a.filter(x=>x!==val):[...a,val]);};
  return(
    <div className="card">
      <div className="eyebrow">Section 2 of 3</div>
      <h2 className="stitle">Sales Strategy Context</h2>
      <p className="sdesc">Help us understand your strategic priorities before we assess your maturity.</p>
      <div className="fg">
        <label className="flbl">Which objectives does your sales org own today? <span className="req">*</span></label>
        <div className="chips">{OBJECTIVES.map(o=><div key={o} className={`chip ${(data.objectives||[]).includes(o)?"on":""}`} onClick={()=>toggle("objectives",o)}>{o}</div>)}</div>
        {err.objectives&&<div className="errmsg">{err.objectives}</div>}
      </div>
      <div className="divider"/>
      <div className="fg">
        <label className="flbl">If you could achieve ONE outcome by improving your sales engine, what would it be? <span className="req">*</span></label>
        <textarea className="ftextarea" placeholder="e.g. Improve forecast accuracy to within 5% each quarter‚Ä¶" value={data.topOutcome||""} onChange={e=>onChange("topOutcome",e.target.value)}/>
        {err.topOutcome&&<div className="errmsg">{err.topOutcome}</div>}
      </div>
      <div className="fg">
        <label className="flbl">How confident are you that the right strategy and platform could move the needle?</label>
        <div className="scale-row">{[1,2,3,4,5,6,7,8,9,10].map(n=><div key={n} className={`scale-btn ${data.confidence===n?"on":""}`} onClick={()=>onChange("confidence",n)}>{n}</div>)}</div>
        <div className="scale-lbls"><span>Not at all</span><span>Absolutely</span></div>
      </div>
      <div className="fg">
        <label className="flbl">Improving our sales process is a priority in the next‚Ä¶ <span className="req">*</span></label>
        <select className="fselect" value={data.timeline||""} onChange={e=>onChange("timeline",e.target.value)}>
          <option value="">Select a timeframe‚Ä¶</option>
          {["1‚Äì3 Months","4‚Äì6 Months","7‚Äì12 Months","1‚Äì2 Years","Not a current priority"].map(t=><option key={t}>{t}</option>)}
        </select>
        {err.timeline&&<div className="errmsg">{err.timeline}</div>}
      </div>
      <div className="fg">
        <label className="flbl">What are your primary sales segments or motions? <span className="req">*</span></label>
        <div className="chips">{SEGMENTS.map(s=><div key={s} className={`chip ${(data.segments||[]).includes(s)?"on":""}`} onClick={()=>toggle("segments",s)}>{s}</div>)}</div>
        {err.segments&&<div className="errmsg">{err.segments}</div>}
      </div>
      <div className="btn-nav">
        <button className="btn btn-ghost" onClick={onBack}>‚Üê Back</button>
        <button className="btn btn-primary" onClick={()=>{if(validate())onNext();}}>Start Assessment ‚Üí</button>
      </div>
    </div>
  );
}

function AssessmentScreen({questions,answers,onAnswer,onNext,onBack}){
  const [cur,setCur]=useState(0);
  const active=questions.filter(q=>q.active!==false);
  const total=active.length,q=active[cur],ans=answers[q?.id];
  if(!q)return null;
  const goNext=()=>cur<total-1?setCur(cur+1):onNext();
  const goPrev=()=>cur>0?setCur(cur-1):onBack();
  return(
    <div className="card">
      <div className="eyebrow">Section 3 of 3 ‚Äî Maturity Diagnostic</div>
      <div className="q-pips">{active.map((qq,i)=><div key={qq.id} className={`q-pip ${answers[qq.id]!==undefined?"done":i===cur?"cur":""}`}/>)}</div>
      <div className="q-meta"><span className="q-badge">{q.domain}</span><span className="q-num">Question {cur+1} of {total}</span></div>
      <div className="q-text">{q.text}</div>
      <div className="ans-grid">
        {q.answers.map((a,i)=>(
          <div key={i} className={`ans-card ${ans===i+1?"on":""}`} onClick={()=>onAnswer(q.id,i+1)}>
            <div className="ans-num">{i+1}</div>
            <div className="ans-text">{a}</div>
          </div>
        ))}
      </div>
      <div className="btn-nav">
        <button className="btn btn-ghost" onClick={goPrev}>‚Üê {cur===0?"Back":"Previous"}</button>
        <button className="btn btn-primary" disabled={!ans} onClick={goNext}>{cur<total-1?"Next ‚Üí":"View My Results ‚Üí"}</button>
      </div>
    </div>
  );
}

function RadarChart({dimScores}){
  const dims=Object.keys(dimScores);
  if(!dims.length)return null;
  const cx=200,cy=200,r=130,n=dims.length,step=(2*Math.PI)/n;
  const pt=(val,i,max=4)=>{const a=i*step-Math.PI/2,rr=(val/max)*r;return{x:cx+rr*Math.cos(a),y:cy+rr*Math.sin(a)};};
  const grid=[1,2,3,4].map(lv=>dims.map((_,i)=>pt(lv,i)).map(p=>`${p.x},${p.y}`).join(" "));
  const dataPts=dims.map((d,i)=>pt(dimScores[d]||0,i));
  const poly=dataPts.map(p=>`${p.x},${p.y}`).join(" ");
  const labels=dims.map((d,i)=>{const lp=pt(5.0,i);return{d,x:lp.x,y:lp.y,score:dimScores[d]||0};});
  return(
    <div className="radar-wrap">
      <svg width="400" height="400" viewBox="0 0 400 400" style={{maxWidth:"100%"}}>
        {grid.map((pts,li)=><polygon key={li} points={pts} fill="none" stroke="#E5E5E5" strokeWidth="1"/>)}
        {dims.map((_,i)=><line key={i} x1={cx} y1={cy} x2={pt(4,i).x} y2={pt(4,i).y} stroke="#E5E5E5" strokeWidth="1.5"/>)}
        <polygon points={poly} fill="#0176D3" fillOpacity="0.12" stroke="#0176D3" strokeWidth="2.5"/>
        {dataPts.map((p,i)=><circle key={i} cx={p.x} cy={p.y} r="5" fill="#0176D3" stroke="white" strokeWidth="2"/>)}
        {labels.map((l,i)=>{
          const s=scoreStyle(l.score);
          const vc=s.val==="v1"?"#BA0517":s.val==="v2"?"#FE5000":s.val==="v3"?"#B8860B":"#06A59A";
          const anchor=l.x<cx-15?"end":l.x>cx+15?"start":"middle";
          return(<g key={i}>
            <text x={l.x} y={l.y-4} textAnchor={anchor} fontSize="11" fontWeight="700" fill="#032D60" fontFamily="sans-serif">{l.d.length>18?l.d.substring(0,16)+"‚Ä¶":l.d}</text>
            <text x={l.x} y={l.y+11} textAnchor={anchor} fontSize="11" fontWeight="700" fill={vc} fontFamily="sans-serif">{l.score.toFixed(1)}</text>
          </g>);
        })}
        <circle cx={cx} cy={cy} r="3" fill="#E5E5E5"/>
      </svg>
    </div>
  );
}

function ResultsScreen({about,answers,onSubmit,submitState}){
  const allScores=Object.values(answers).filter(Boolean);
  const avg=allScores.length?allScores.reduce((a,b)=>a+b,0)/allScores.length:0;
  const overall=Math.round(avg*10)/10,tier=getTier(avg),ti=TIER_INFO[tier];
  const dimScores=getDimScores(answers);
  const rawTotal=allScores.reduce((a,b)=>a+b,0),maxTotal=Object.keys(answers).length*4;

  return(
    <div style={{animation:"up .35s ease"}}>
      <div className="res-header">
        <div className="res-top">
          <div>
            <div className={`tier-badge ${ti.cls}`}>‚óè {ti.label}</div>
            <div className="res-tier-title">{about.businessName||"Your Organization"}'s Sales Maturity</div>
            <div className="res-tier-desc">{ti.desc}</div>
          </div>
          <div className="score-block">
            <div className="score-lbl">Overall Score</div>
            <div className="score-num">{overall}<span style={{fontSize:22,opacity:.4}}>/4.0</span></div>
            <div className="score-sub">{rawTotal} pts of {maxTotal} possible</div>
          </div>
        </div>
      </div>

      <div className="res-body">
        {/* MATURITY SPECTRUM */}
        <div className="sec-head">Where You Stand on the Maturity Spectrum</div>
        <div className="spectrum-wrap">
          <div className="spectrum-track">
            {[1,2,3,4].map(t=><div key={t} className={`spec-seg s${t} ${t===tier?"active":""}`}/>)}
          </div>
          <div className="spectrum-tiers">
            {[1,2,3,4].map(t=>{
              const ti2=TIER_INFO[t];
              return(
                <div key={t} className={`spec-tier ${t===tier?`current ${ti2.border}`:""}`}>
                  {t===tier&&<div className="you-pill">‚ñ∂ You are here</div>}
                  <div className="spec-tier-label" style={{color:ti2.color}}>{ti2.short}</div>
                  <div className="spec-tier-name">{ti2.label}</div>
                  <div className="spec-tier-desc">{ti2.desc}</div>
                </div>
              );
            })}
          </div>
        </div>

        {/* RADAR */}
        <div className="sec-head">Maturity by Dimension</div>
        <RadarChart dimScores={dimScores}/>

        {/* HEATMAP + DIMENSION NARRATIVES */}
        <div className="sec-head">Dimension Scores & Growth Considerations</div>
        <div className="heatmap" style={{marginBottom:32}}>
          {Object.entries(dimScores).map(([dim,score])=>{
            const s=scoreStyle(score),t=getTier(score);
            const narrative=DIM_NARRATIVES[dim]?.[t]||"";
            return(
              <div key={dim} className="hm-item">
                <div className="hm-dim">{dim}</div>
                <div className="hm-row">
                  <div className="hm-bg"><div className={`hm-fill ${s.bar}`} style={{width:`${(score/4)*100}%`}}/></div>
                  <div className={`hm-val ${s.val}`}>{score.toFixed(1)}</div>
                </div>
                {narrative&&<div className="hm-next">{narrative}</div>}
              </div>
            );
          })}
        </div>

        {/* SUMMARY */}
        {about.topOutcome&&(
          <div style={{background:"#F3F6FB",borderRadius:10,padding:"14px 18px",marginBottom:22,borderLeft:"3px solid var(--blue)"}}>
            <div style={{fontSize:10,fontWeight:700,letterSpacing:1,textTransform:"uppercase",color:"var(--blue)",marginBottom:4}}>Your Stated Priority</div>
            <div style={{fontSize:14,color:"var(--g5)",fontStyle:"italic"}}>"{about.topOutcome}"</div>
          </div>
        )}
        <div style={{marginBottom:8}}>
          <div className="sec-head">Assessment Summary</div>
          <div className="summary-grid">
            {[["Respondent",about.fullName],["Title",about.title],["Company",about.businessName],["Industry",about.industry],["Timeline",about.timeline],["Confidence",about.confidence?`${about.confidence}/10`:"‚Äî"]].map(([k,v])=>(
              <div key={k} className="sum-item"><div className="sum-lbl">{k}</div><div className="sum-val">{v||"‚Äî"}</div></div>
            ))}
          </div>
        </div>

        {submitState==="sending"&&<div className="status-msg st-sending">‚è≥ Submitting results‚Ä¶</div>}
        {submitState==="ok"&&<div className="status-msg st-ok">‚úÖ Results saved successfully.</div>}
        {submitState==="error"&&<div className="status-msg st-err">‚ö†Ô∏è Could not reach Google Sheets. Check the webhook URL in the config.</div>}

        <div className="print-bar">
          <button className="btn btn-secondary" onClick={()=>window.print()}>üñ® Print / Save PDF</button>
          {submitState!=="ok"&&<button className="btn btn-green" onClick={onSubmit} disabled={submitState==="sending"}>{submitState==="sending"?"Submitting‚Ä¶":"‚úì Submit Results"}</button>}
        </div>
      </div>
    </div>
  );
}

function ThankYouScreen({about,overall,tier}){
  const ti=TIER_INFO[tier];
  return(
    <div className="card">
      <div className="ty">
        <div className="ty-icon">üéØ</div>
        <h2 className="ty-title">Thank you, {about.fullName?.split(" ")[0]||"there"}!</h2>
        <p className="ty-desc">Your B2B Sales Maturity Assessment is complete. A Salesforce consultant will review your results and be in touch.</p>
        <div className="ty-score">
          <div className="ty-score-item"><div className="ty-score-val">{overall}</div><div className="ty-score-lbl">Overall Score</div></div>
          <div className="ty-score-item"><div className="ty-score-val">/4.0</div><div className="ty-score-lbl">Max Possible</div></div>
          <div className="ty-score-item"><div className="ty-score-val" style={{fontSize:18}}>{ti.short}</div><div className="ty-score-lbl">Maturity Tier</div></div>
        </div>
        <p style={{fontSize:13,color:"var(--g4)",marginBottom:24}}>We'll follow up at <strong>{about.email}</strong>.</p>
        <div className="ty-actions">
          <button className="btn btn-secondary" onClick={()=>window.print()}>üñ® Download Results</button>
          <button className="btn btn-primary" onClick={()=>window.location.reload()}>Start New Assessment</button>
        </div>
      </div>
    </div>
  );
}

/* ‚ïê‚ïê‚ïê APP ‚ïê‚ïê‚ïê */
function App(){
  const [step,setStep]=useState(1);
  const [about,setAbout]=useState({});
  const [strategy,setStrategy]=useState({});
  const [answers,setAnswers]=useState({});
  const [submitState,setSubmitState]=useState("idle");
  const [questions,setQuestions]=useState(DEFAULT_QUESTIONS);

  useEffect(()=>{
    if(QUESTIONS_SHEET_URL!=="YOUR_APPS_SCRIPT_URL_HERE"){
      fetch(QUESTIONS_SHEET_URL+"?action=getQuestions")
        .then(r=>r.json())
        .then(d=>{if(d.questions?.length)setQuestions(d.questions);})
        .catch(()=>{});
    }
  },[]);

  const upA=(k,v)=>setAbout(p=>({...p,[k]:v}));
  const upS=(k,v)=>setStrategy(p=>({...p,[k]:v}));
  const scroll=()=>window.scrollTo({top:0,behavior:"smooth"});
  const next=()=>{setStep(s=>s+1);scroll();};
  const back=()=>{setStep(s=>s-1);scroll();};
  const allData={...about,...strategy};

  const allScores=Object.values(answers).filter(Boolean);
  const avg=allScores.length?allScores.reduce((a,b)=>a+b,0)/allScores.length:0;
  const overall=Math.round(avg*10)/10,tier=getTier(avg);
  const dimScores=getDimScores(answers);
  const emailDomain=extractDomain(about.email||"");
  const isTester=TESTER_DOMAINS.includes(emailDomain);

  const handleSubmit=async()=>{
    setSubmitState("sending");
    const payload={
      timestamp:new Date().toISOString(),
      fullName:about.fullName,email:about.email,businessName:about.businessName,
      title:about.title,industry:about.industry,timeline:strategy.timeline,
      confidence:strategy.confidence,objectives:(strategy.objectives||[]).join(", "),
      segments:(strategy.segments||[]).join(", "),topOutcome:strategy.topOutcome,
      overallScore:overall,overallTier:TIER_INFO[tier].label,
      emailDomain,isTester,
      ...Object.fromEntries(questions.filter(q=>q.active!==false).map(q=>[`Q_${q.id}_${q.domain.replace(/\s+/g,"_")}`,answers[q.id]||""])),
      ...Object.fromEntries(Object.entries(dimScores).map(([d,s])=>[`DIM_${d.replace(/[^a-zA-Z0-9]/g,"_")}`,s])),
    };
    if(GOOGLE_SHEETS_WEBHOOK==="YOUR_APPS_SCRIPT_URL_HERE"){
      setSubmitState("ok");setTimeout(()=>{setStep(6);scroll();},800);return;
    }
    try{
      await fetch(GOOGLE_SHEETS_WEBHOOK,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/json"},body:JSON.stringify(payload)});
      setSubmitState("ok");setTimeout(()=>{setStep(6);scroll();},1000);
    }catch(e){setSubmitState("error");}
  };

  return(
    <div>
      <Nav/>
      {step<6&&<ProgressBar step={step}/>}
      <div className="main">
        {step===1&&<WelcomeScreen onNext={next}/>}
        {step===2&&<AboutYouScreen data={about} onChange={upA} onNext={next} onBack={back}/>}
        {step===3&&<StrategyScreen data={strategy} onChange={upS} onNext={next} onBack={back}/>}
        {step===4&&<AssessmentScreen questions={questions} answers={answers} onAnswer={(id,val)=>setAnswers(p=>({...p,[id]:val}))} onNext={next} onBack={back}/>}
        {step===5&&<ResultsScreen about={allData} answers={answers} onSubmit={handleSubmit} submitState={submitState}/>}
        {step===6&&<ThankYouScreen about={allData} overall={overall} tier={tier}/>}
      </div>
    </div>
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(<App/>);
</script>
</body>
</html>
